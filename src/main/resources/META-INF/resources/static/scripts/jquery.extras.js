/**
\ * jTemplates 0.8.4 (http://jtemplates.tpython.com)
 * Copyright (c) 2007-2013 Tomasz Gloc (http://www.tpython.com)
 * 
 * Dual licensed under the MIT (MIT-LICENSE.txt)
 * and/or GPL (GPL-LICENSE.txt) licenses.
 *
 * Id: $Id: jquery-jtemplates_uncompressed.js 203 2013-02-03 13:28:34Z tom $
 */
window.jQuery&&!window.jQuery.createTemplate&&function(jQuery){var Template=function(e,t,a){this._tree=[],this._param={},this._includes=null,this._templates={},this._templates_code={},this.settings=jQuery.extend({disallow_functions:!1,filter_data:!0,filter_params:!1,runnable_functions:!1,clone_data:!0,clone_params:!0},a),this.f_cloneData=void 0!==this.settings.f_cloneData?this.settings.f_cloneData:TemplateUtils.cloneData,this.f_escapeString=void 0!==this.settings.f_escapeString?this.settings.f_escapeString:TemplateUtils.escapeHTML,this.f_parseJSON=void 0!==this.settings.f_parseJSON?this.settings.f_parseJSON:this.settings.disallow_functions?jQuery.parseJSON:TemplateUtils.parseJSON,null!=e&&(this.splitTemplates(e,t),e&&this.setTemplate(this._templates_code.MAIN,t,this.settings),this._templates_code=null)};Template.version="0.8.4",Template.DEBUG_MODE=!1,Template.FOREACH_LOOP_LIMIT=1e4,Template.guid=0,Template.prototype.splitTemplates=function(e,t){for(var a,n,r,i,o=/\{#template *(\w+) *(.*?) *\}/g,s=null,l=[];null!==(a=o.exec(e));){if(s=o.lastIndex,n=a[1],-1===(r=e.indexOf("{#/template "+n+"}",s)))throw new Error('jTemplates: Template "'+n+'" is not closed.');this._templates_code[n]=e.substring(s,r),l[n]=TemplateUtils.optionToObject(a[2])}if(null!==s){for(i in this._templates_code)"MAIN"!==i&&(this._templates[i]=new Template);for(i in this._templates_code)"MAIN"!==i&&(this._templates[i].setTemplate(this._templates_code[i],jQuery.extend({},t||{},this._templates||{}),jQuery.extend({},this.settings,l[i])),this._templates_code[i]=null)}else this._templates_code.MAIN=e},Template.prototype.setTemplate=function(e,t,a){if(null!=e){e=(e=e.replace(/[\n\r]/g,"")).replace(/\{\*.*?\*\}/g,""),this._includes=jQuery.extend({},this._templates||{},t||{}),this.settings=new Object(a);var n,r,i,o=this._tree,s=e.match(/\{#.*?\}/g),l=0,u=0,c=0;for(r=0,i=s?s.length:0;r<i;++r){var h=s[r];if(c){if(-1===(u=e.indexOf("{#/literal}",l)))throw new Error("jTemplates: No end of literal.");for(u>l&&o.push(new TextNode(e.substring(l,u),1,this)),l=u+11,c=0;r<i&&"{#/literal}"!==s[r];)r++}else{(u=e.indexOf(h,l))>l&&o.push(new TextNode(e.substring(l,u),c,this)),h.match(/\{#([\w\/]+).*?\}/);var f=RegExp.$1;switch(f){case"elseif":o.addCond(h);break;case"if":(n=new opIF(o,this)).addCond(h),o.push(n),o=n;break;case"else":o.switchToElse();break;case"/if":case"/for":case"/foreach":o=o.getParent();break;case"foreach":n=new opFOREACH(h,o,this),o.push(n),o=n;break;case"for":n=opFORFactory(h,o,this),o.push(n),o=n;break;case"continue":case"break":o.push(new JTException(f));break;case"include":o.push(new Include(h,this._includes,this));break;case"param":o.push(new UserParam(h,this));break;case"var":o.push(new UserVariable(h,this));break;case"cycle":o.push(new Cycle(h));break;case"ldelim":o.push(new TextNode("{",1,this));break;case"rdelim":o.push(new TextNode("}",1,this));break;case"literal":c=1;break;case"/literal":if(Template.DEBUG_MODE)throw new Error("jTemplates: Missing begin of literal.");break;default:if(Template.DEBUG_MODE)throw new Error("jTemplates: unknown tag: "+f+".")}l=u+h.length}}e.length>l&&o.push(new TextNode(e.substr(l),c,this))}else this._tree.push(new TextNode("",1,this))},Template.prototype.get=function(e,t,a,n){1==++n&&null!=a&&jQuery.removeData(a,"jTemplatesRef");var r,i=e,o="";this.settings.clone_data&&(i=this.f_cloneData(e,{escapeData:this.settings.filter_data&&1==n,noFunc:this.settings.disallow_functions},this.f_escapeString)),r=this.settings.clone_params?jQuery.extend({},this.f_cloneData(this._param,{escapeData:this.settings.filter_params,noFunc:!1},this.f_escapeString),this.f_cloneData(t,{escapeData:this.settings.filter_params&&1==n,noFunc:!1},this.f_escapeString)):jQuery.extend({},this._param,t);for(var s=0,l=this._tree.length;s<l;++s)o+=this._tree[s].get(i,r,a,n);return this.EvalObj=null,--n,o},Template.prototype.getBin=function(){return null==this.EvalObj&&(this.EvalObj=new EvalClass(this)),this.EvalObj},Template.prototype.setParam=function(e,t){this._param[e]=t},TemplateUtils=function(){},TemplateUtils.escapeHTML=function(e){return e.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")},TemplateUtils.cloneData=function(e,t,a){if(null==e)return e;switch(e.constructor){case Object:var n={};for(var r in e)n[r]=TemplateUtils.cloneData(e[r],t,a);return t.noFunc||e.hasOwnProperty("toString")&&(n.toString=e.toString),n;case Array:for(var i=[],o=(r=0,e.length);r<o;++r)i[r]=TemplateUtils.cloneData(e[r],t,a);return i;case String:return t.escapeData?a(e):e;case Function:if(t.noFunc){if(Template.DEBUG_MODE)throw new Error("jTemplates: Functions are not allowed.");return}}return e},TemplateUtils.optionToObject=function(e){if(null==e)return{};var t=e.split(/[= ]/);""===t[0]&&t.shift();for(var a={},n=0,r=t.length;n<r;n+=2)a[t[n]]=t[n+1];return a},TemplateUtils.parseJSON=function(e){if("string"!=typeof e||!e)return null;try{return new Function("return "+jQuery.trim(e))()}catch(e){if(Template.DEBUG_MODE)throw new Error("jTemplates: Invalid JSON");return{}}},TemplateUtils.ReturnRefValue=function(e,t,a){for(;null!=e;){var n=jQuery.data(e,"jTemplatesRef");if(null!=n&&n.guid==t&&null!=n.d[a])return n.d[a];e=e.parentNode}return null};var TextNode=function(e,t,a){this._value=e,this._literalMode=t,this._template=a};TextNode.prototype.get=function(e,t,a,n){if(this._literalMode)return this._value;for(var r=this._value,i="",o=-1,s=0,l=-1,u=0;;){var c=r.indexOf("{",o+1),h=r.indexOf("}",o+1);if(c<0&&h<0)break;-1!=c&&c<h||-1==h?(o=c,1==++s&&(l=c,i+=r.substring(u,o),u=-1)):(o=h,0==--s?l>=0&&(i+=this._template.getBin().evaluateContent(e,t,a,r.substring(l,h+1)),l=-1,u=o+1):s<0&&(s=0))}return u>-1&&(i+=r.substr(u)),i},EvalClass=function(e){this.__templ=e},EvalClass.prototype.evaluateContent=function($T,$P,$Q,__value){try{var result=eval(__value);if(jQuery.isFunction(result)){if(this.__templ.settings.disallow_functions||!this.__templ.settings.runnable_functions)return"";result=result($T,$P,$Q)}return void 0===result?"":String(result)}catch(e){if(Template.DEBUG_MODE)throw e instanceof JTException&&(e.type="subtemplate"),e;return""}},EvalClass.prototype.evaluate=function($T,$P,$Q,__value){return eval(__value)};var opIF=function(e,t){this._parent=e,this._templ=t,this._cond=[],this._tree=[],this._curr=null};opIF.prototype.push=function(e){this._curr.push(e)},opIF.prototype.getParent=function(){return this._parent},opIF.prototype.addCond=function(e){e.match(/\{#(?:else)*if (.*?)\}/),this._cond.push(RegExp.$1),this._curr=[],this._tree.push(this._curr)},opIF.prototype.switchToElse=function(){this._cond.push(!0),this._curr=[],this._tree.push(this._curr)},opIF.prototype.get=function(e,t,a,n){var r="";try{for(var i=0,o=this._cond.length;i<o;++i)if(this._templ.getBin().evaluate(e,t,a,this._cond[i])){for(var s=this._tree[i],l=0,u=s.length;l<u;++l)r+=s[l].get(e,t,a,n);return r}}catch(e){if(Template.DEBUG_MODE||e instanceof JTException)throw e}return r},opFORFactory=function(e,t,a){if(e.match(/\{#for (\w+?) *= *(\S+?) +to +(\S+?) *(?:step=(\S+?))*\}/)){var n=new opFOREACH(null,t,a);return n._name=RegExp.$1,n._option={begin:RegExp.$2||0,end:RegExp.$3||-1,step:RegExp.$4||1,extData:"$T"},n._runFunc=function(e){return e},n}throw new Error('jTemplates: Operator failed "find": '+e)};var opFOREACH=function(e,t,a){this._parent=t,this._template=a,null!=e&&(e.match(/\{#foreach +(.+?) +as +(\w+?)( .+)*\}/),this._arg=RegExp.$1,this._name=RegExp.$2,this._option=RegExp.$3||null,this._option=TemplateUtils.optionToObject(this._option)),this._onTrue=[],this._onFalse=[],this._currentState=this._onTrue};opFOREACH.prototype.push=function(e){this._currentState.push(e)},opFOREACH.prototype.getParent=function(){return this._parent},opFOREACH.prototype.switchToElse=function(){this._currentState=this._onFalse},opFOREACH.prototype.get=function(e,t,a,n){try{var r=void 0===this._runFunc?this._template.getBin().evaluate(e,t,a,this._arg):this._runFunc;if(r===$)throw new Error("jTemplate: Variable '$' cannot be used as loop-function");var i=[],o=typeof r;if("object"==o){var s=[];jQuery.each(r,function(e,t){i.push(e),s.push(t)}),r=s}var l=void 0!==this._option.extData?this._template.getBin().evaluate(e,t,a,this._option.extData):null!=e?e:{};null==l&&(l={});var u,c=Number(this._template.getBin().evaluate(e,t,a,this._option.begin)||0),h=Number(this._template.getBin().evaluate(e,t,a,this._option.step)||1);u="function"!=o?r.length:void 0===this._option.end||null===this._option.end?Number.MAX_VALUE:Number(this._template.getBin().evaluate(e,t,a,this._option.end))+(h>0?1:-1);var f,p,d="";if(this._option.count){var m=c+Number(this._template.getBin().evaluate(e,t,a,this._option.count));u=m>u?u:m}if(u>c&&h>0||u<c&&h<0)for(var g,v,_=0,w="function"!=o?Math.ceil((u-c)/h):void 0,y=0;h>0?c<u:c>u;c+=h,++_,++y){if(Template.DEBUG_MODE&&y>Template.FOREACH_LOOP_LIMIT)throw new Error("jTemplate: Foreach loop limit was exceed");if(g=i[c],"function"!=o)v=r[c];else if(null==(v=r(c)))break;if(("function"!=typeof v||!this._template.settings.disallow_functions&&this._template.settings.runnable_functions)&&!("object"==o&&g in Object&&v===Object[g])){var b=l[this._name];for(l[this._name]=v,l[this._name+"$index"]=c,l[this._name+"$iteration"]=_,l[this._name+"$first"]=0===_,l[this._name+"$last"]=c+h>=u,l[this._name+"$total"]=w,l[this._name+"$key"]=void 0!==g&&g.constructor==String?this._template.f_escapeString(g):g,l[this._name+"$typeof"]=typeof v,f=0,p=this._onTrue.length;f<p;++f)try{d+=this._onTrue[f].get(l,t,a,n)}catch(e){if(!(e instanceof JTException))throw e;switch(e.type){case"continue":f=p;break;case"break":f=p,c=u;break;default:throw e}}delete l[this._name+"$index"],delete l[this._name+"$iteration"],delete l[this._name+"$first"],delete l[this._name+"$last"],delete l[this._name+"$total"],delete l[this._name+"$key"],delete l[this._name+"$typeof"],delete l[this._name],l[this._name]=b}}else for(f=0,p=this._onFalse.length;f<p;++f)d+=this._onFalse[f].get(e,t,a,n);return d}catch(u){if(Template.DEBUG_MODE||u instanceof JTException)throw u;return""}};var JTException=function(e){this.type=e};JTException.prototype=Error,JTException.prototype.get=function(e){throw this};var Include=function(e,t,a){if(e.match(/\{#include (.*?)(?: root=(.*?))?\}/),this._template=t[RegExp.$1],null==this._template&&Template.DEBUG_MODE)throw new Error("jTemplates: Cannot find include: "+RegExp.$1);this._root=RegExp.$2,this._mainTempl=a};Include.prototype.get=function(e,t,a,n){try{return this._template.get(this._mainTempl.getBin().evaluate(e,t,a,this._root),t,a,n)}catch(e){if(Template.DEBUG_MODE||e instanceof JTException)throw e}return""};var UserParam=function(e,t){e.match(/\{#param name=(\w*?) value=(.*?)\}/),this._name=RegExp.$1,this._value=RegExp.$2,this._templ=t};UserParam.prototype.get=function(e,t,a,n){try{t[this._name]=this._templ.getBin().evaluate(e,t,a,this._value)}catch(e){if(Template.DEBUG_MODE||e instanceof JTException)throw e;t[this._name]=void 0}return""};var UserVariable=function(e,t){e.match(/\{#var (.*?)\}/),this._id=RegExp.$1,this._templ=t};UserVariable.prototype.get=function(e,t,a,n){try{if(null==a)return"";var r=this._templ.getBin().evaluate(e,t,a,this._id),i=jQuery.data(a,"jTemplatesRef");null==i&&(i={guid:++Template.guid,d:[]});var o=i.d.push(r);return jQuery.data(a,"jTemplatesRef",i),"(TemplateUtils.ReturnRefValue(this,"+i.guid+","+(o-1)+"))"}catch(e){if(Template.DEBUG_MODE||e instanceof JTException)throw e;return""}};var Cycle=function(oper){if(oper.match(/\{#cycle values=(.*?)\}/),this._values=eval(RegExp.$1),this._length=this._values.length,this._length<=0)throw new Error("jTemplates: no elements for cycle");this._index=0,this._lastSessionID=-1};Cycle.prototype.get=function(e,t,a,n){var r=jQuery.data(a,"jTemplateSID");r!=this._lastSessionID&&(this._lastSessionID=r,this._index=0);var i=this._index++%this._length;return this._values[i]},jQuery.fn.setTemplate=function(e,t,a){return jQuery(this).each(function(){var n=e&&e.constructor==Template?e:new Template(e,t,a);jQuery.data(this,"jTemplate",n),jQuery.data(this,"jTemplateSID",0)})},jQuery.fn.setTemplateURL=function(e,t,a){var n=jQuery.ajax({url:e,dataType:"text",async:!1,type:"GET"}).responseText;return jQuery(this).setTemplate(n,t,a)},jQuery.fn.setTemplateElement=function(e,t,a){var n=e;"string"===jQuery.type(e)&&(n=jQuery("#"+e));var r=n.val();return null==r&&(r=(r=n.html()).replace(/&lt;/g,"<").replace(/&gt;/g,">")),r=(r=(r=jQuery.trim(r)).replace(/^<\!\[CDATA\[([\s\S]*)\]\]>$/im,"$1")).replace(/^<\!--([\s\S]*)-->$/im,"$1"),jQuery(this).setTemplate(r,t,a)},jQuery.fn.hasTemplate=function(){var e=0;return jQuery(this).each(function(){jQuery.getTemplate(this)&&++e}),e},jQuery.fn.removeTemplate=function(){return jQuery(this).processTemplateStop(),jQuery(this).each(function(){jQuery.removeData(this,"jTemplate")})},jQuery.fn.setParam=function(e,t){return jQuery(this).each(function(){var a=jQuery.getTemplate(this);if(null!=a)a.setParam(e,t);else if(Template.DEBUG_MODE)throw new Error("jTemplates: Template is not defined.")})},jQuery.fn.processTemplate=function(e,t,a){return jQuery(this).each(function(){var n=jQuery.getTemplate(this);if(null!=n)null!=a&&a.StrToJSON&&(e=n.f_parseJSON(e)),jQuery.data(this,"jTemplateSID",jQuery.data(this,"jTemplateSID")+1),jQuery(this).html(n.get(e,t,this,0));else if(Template.DEBUG_MODE)throw new Error("jTemplates: Template is not defined.")})},jQuery.fn.processTemplateURL=function(e,t,a){var n=this,r=jQuery.extend({cache:!1},jQuery.ajaxSettings);return r=jQuery.extend(r,a),jQuery.ajax({url:e,type:r.type,data:r.data,dataFilter:r.dataFilter,async:r.async,headers:r.headers,cache:r.cache,timeout:r.timeout,dataType:"text",success:function(e){var a=jQuery(n).processTemplate(e,t,{StrToJSON:!0});r.on_success&&r.on_success(a)},error:r.on_error,complete:r.on_complete}),this};var Updater=function(e,t,a,n,r,i){this._url=e,this._param=t,this._interval=a,this._args=n,this.objs=r,this.timer=null,this._options=i||{};var o=this;jQuery(r).each(function(){jQuery.data(this,"jTemplateUpdater",o)}),this.run()};Updater.prototype.run=function(){if(this.objs=jQuery.grep(this.objs,function(e){return jQuery.contains(document.body,e.jquery?e[0]:e)}),0!==this.objs.length){var e=this;jQuery.ajax({url:this._url,dataType:"text",data:this._args,cache:!1,headers:e._options.headers,success:function(t){try{var a=jQuery(e.objs).processTemplate(t,e._param,{StrToJSON:!0});e._options.on_success&&e._options.on_success(a)}catch(e){}}}),this.timer=setTimeout(function(){e.run()},this._interval)}},jQuery.fn.processTemplateStart=function(e,t,a,n,r){return new Updater(e,t,a,n,this,r)},jQuery.fn.processTemplateStop=function(){return jQuery(this).each(function(){var e=jQuery.data(this,"jTemplateUpdater");if(null!=e){var t=this;e.objs=jQuery.grep(e.objs,function(e){return e!=t}),jQuery.removeData(this,"jTemplateUpdater")}})},jQuery.extend({createTemplate:function(e,t,a){return new Template(e,t,a)},createTemplateURL:function(e,t,a){var n=jQuery.ajax({url:e,dataType:"text",async:!1,type:"GET"}).responseText;return new Template(n,t,a)},getTemplate:function(e){return jQuery.data(e,"jTemplate")},processTemplateToText:function(e,t,a){return e.get(t,a,void 0,0)},jTemplatesDebugMode:function(e){Template.DEBUG_MODE=e}})}(jQuery),function(e){e.fn.hoverIntent=function(t,a){var n,r,i,o,s={sensitivity:7,interval:100,timeout:0};s=e.extend(s,a?{over:t,out:a}:t);var l=function(e){n=e.pageX,r=e.pageY},u=function(t,a){if(a.hoverIntent_t=clearTimeout(a.hoverIntent_t),Math.abs(i-n)+Math.abs(o-r)<s.sensitivity)return e(a).unbind("mousemove",l),a.hoverIntent_s=1,s.over.apply(a,[t]);i=n,o=r,a.hoverIntent_t=setTimeout(function(){u(t,a)},s.interval)},c=function(t){var a=jQuery.extend({},t),n=this;n.hoverIntent_t&&(n.hoverIntent_t=clearTimeout(n.hoverIntent_t)),"mouseenter"==t.type?(i=a.pageX,o=a.pageY,e(n).bind("mousemove",l),1!=n.hoverIntent_s&&(n.hoverIntent_t=setTimeout(function(){u(a,n)},s.interval))):(e(n).unbind("mousemove",l),1==n.hoverIntent_s&&(n.hoverIntent_t=setTimeout(function(){!function(e,t){t.hoverIntent_t=clearTimeout(t.hoverIntent_t),t.hoverIntent_s=0,s.out.apply(t,[e])}(a,n)},s.timeout)))};return this.bind("mouseenter",c).bind("mouseleave",c)},e.fn.getHiddenDimensions=function(e){var t={position:"absolute",visibility:"hidden",display:"block"},a={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},n=this.parents().andSelf().not(":visible"),r=[];return n.each(function(){var e={};for(var a in t)t.hasOwnProperty(a)&&(e[a]=this.style[a],this.style[a]=t[a]);r.push(e)}),a.width=this.width(),a.outerWidth=this.outerWidth(e),a.innerWidth=this.innerWidth(),a.height=this.height(),a.innerHeight=this.innerHeight(),a.outerHeight=this.outerHeight(e),a.position=this.position(),a.offset=this.offset(),n.each(function(e){var a=r[e];for(var n in t)t.hasOwnProperty(n)&&(this.style[n]=a[n])}),a}}(jQuery),function($){for(var supportedCSS,styles=document.getElementsByTagName("head")[0].style,toCheck="transformProperty WebkitTransform OTransform msTransform MozTransform".split(" "),a=0;a<toCheck.length;a++)void 0!==styles[toCheck[a]]&&(supportedCSS=toCheck[a]);var IE=eval('"v"=="\v"'),rad;jQuery.fn.extend({rotate:function(e){if(0!==this.length&&void 0!==e){"number"==typeof e&&(e={angle:e});for(var t=[],a=0,n=this.length;a<n;a++){var r=this.get(a);if(r.Wilq32&&r.Wilq32.PhotoEffect)r.Wilq32.PhotoEffect._handleRotation(e);else{var i=$.extend(!0,{},e),o=new Wilq32.PhotoEffect(r,i)._rootObj;t.push($(o))}}return t}},getRotateAngle:function(){for(var e=[],t=0,a=this.length;t<a;t++){var n=this.get(t);n.Wilq32&&n.Wilq32.PhotoEffect&&(e[t]=n.Wilq32.PhotoEffect._angle)}return e},stopRotate:function(){for(var e=0,t=this.length;e<t;e++){var a=this.get(e);a.Wilq32&&a.Wilq32.PhotoEffect&&clearTimeout(a.Wilq32.PhotoEffect._timer)}}}),Wilq32=window.Wilq32||{},Wilq32.PhotoEffect=supportedCSS?function(e,t){e.Wilq32={PhotoEffect:this},this._img=this._rootObj=this._eventObj=e,this._handleRotation(t)}:function(e,t){if(this._img=e,this._rootObj=document.createElement("span"),this._rootObj.style.display="inline-block",this._rootObj.Wilq32={PhotoEffect:this},e.parentNode.insertBefore(this._rootObj,e),e.complete)this._Loader(t);else{var a=this;jQuery(this._img).bind("load",function(){a._Loader(t)})}},Wilq32.PhotoEffect.prototype={_setupParameters:function(e){this._parameters=this._parameters||{},"number"!=typeof this._angle&&(this._angle=0),"number"==typeof e.angle&&(this._angle=e.angle),this._parameters.animateTo="number"==typeof e.animateTo?e.animateTo:this._angle,this._parameters.step=e.step||this._parameters.step||null,this._parameters.easing=e.easing||this._parameters.easing||function(e,t,a,n,r){return-n*((t=t/r-1)*t*t*t-1)+a},this._parameters.duration=e.duration||this._parameters.duration||1e3,this._parameters.callback=e.callback||this._parameters.callback||function(){},e.bind&&e.bind!=this._parameters.bind&&this._BindEvents(e.bind)},_handleRotation:function(e){this._setupParameters(e),this._angle==this._parameters.animateTo?this._rotate(this._angle):this._animateStart()},_BindEvents:function(e){if(e&&this._eventObj){if(this._parameters.bind){var t=this._parameters.bind;for(var a in t)t.hasOwnProperty(a)&&jQuery(this._eventObj).unbind(a,t[a])}for(var a in this._parameters.bind=e,e)e.hasOwnProperty(a)&&jQuery(this._eventObj).bind(a,e[a])}},_Loader:IE?function(e){var t=this._img.width,a=this._img.height;this._img.parentNode.removeChild(this._img),this._vimage=this.createVMLNode("image"),this._vimage.src=this._img.src,this._vimage.style.height=a+"px",this._vimage.style.width=t+"px",this._vimage.style.position="absolute",this._vimage.style.top="0px",this._vimage.style.left="0px",this._container=this.createVMLNode("group"),this._container.style.width=t,this._container.style.height=a,this._container.style.position="absolute",this._container.setAttribute("coordsize",t-1+","+(a-1)),this._container.appendChild(this._vimage),this._rootObj.appendChild(this._container),this._rootObj.style.position="relative",this._rootObj.style.width=t+"px",this._rootObj.style.height=a+"px",this._rootObj.setAttribute("id",this._img.getAttribute("id")),this._rootObj.className=this._img.className,this._eventObj=this._rootObj,this._handleRotation(e)}:function(e){this._rootObj.setAttribute("id",this._img.getAttribute("id")),this._rootObj.className=this._img.className,this._width=this._img.width,this._height=this._img.height,this._widthHalf=this._width/2,this._heightHalf=this._height/2;var t=Math.sqrt(this._height*this._height+this._width*this._width);this._widthAdd=t-this._width,this._heightAdd=t-this._height,this._widthAddHalf=this._widthAdd/2,this._heightAddHalf=this._heightAdd/2,this._img.parentNode.removeChild(this._img),this._aspectW=(parseInt(this._img.style.width,10)||this._width)/this._img.width,this._aspectH=(parseInt(this._img.style.height,10)||this._height)/this._img.height,this._canvas=document.createElement("canvas"),this._canvas.setAttribute("width",this._width),this._canvas.style.position="relative",this._canvas.style.left=-this._widthAddHalf+"px",this._canvas.style.top=-this._heightAddHalf+"px",this._canvas.Wilq32=this._rootObj.Wilq32,this._rootObj.appendChild(this._canvas),this._rootObj.style.width=this._width+"px",this._rootObj.style.height=this._height+"px",this._eventObj=this._canvas,this._cnv=this._canvas.getContext("2d"),this._handleRotation(e)},_animateStart:function(){this._timer&&clearTimeout(this._timer),this._animateStartTime=+new Date,this._animateStartAngle=this._angle,this._animate()},_animate:function(){var e=+new Date,t=e-this._animateStartTime>this._parameters.duration;if(t&&!this._parameters.animatedGif)clearTimeout(this._timer);else{if(this._canvas||this._vimage||this._img){var a=this._parameters.easing(0,e-this._animateStartTime,this._animateStartAngle,this._parameters.animateTo-this._animateStartAngle,this._parameters.duration);this._rotate(~~(10*a)/10)}this._parameters.step&&this._parameters.step(this._angle);var n=this;this._timer=setTimeout(function(){n._animate.call(n)},10)}this._parameters.callback&&t&&(this._angle=this._parameters.animateTo,this._rotate(this._angle),this._parameters.callback.call(this._rootObj))},_rotate:(rad=Math.PI/180,IE?function(e){this._angle=e,this._container.style.rotation=e%360+"deg"}:supportedCSS?function(e){this._angle=e,this._img.style[supportedCSS]="rotate("+e%360+"deg)"}:function(e){this._angle=e,e=e%360*rad,this._canvas.width=this._width+this._widthAdd,this._canvas.height=this._height+this._heightAdd,this._cnv.translate(this._widthAddHalf,this._heightAddHalf),this._cnv.translate(this._widthHalf,this._heightHalf),this._cnv.rotate(e),this._cnv.translate(-this._widthHalf,-this._heightHalf),this._cnv.scale(this._aspectW,this._aspectH),this._cnv.drawImage(this._img,0,0)})},IE&&(Wilq32.PhotoEffect.prototype.createVMLNode=function(){document.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)");try{return!document.namespaces.rvml&&document.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),function(e){return document.createElement("<rvml:"+e+' class="rvml">')}}catch(e){return function(e){return document.createElement("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}}())}(jQuery),function(e){var t=e.scrollTo=function(t,a,n){e(window).scrollTo(t,a,n)};function a(e){return"object"==typeof e?e:{top:e,left:e}}t.defaults={axis:"xy",duration:parseFloat(e.fn.jquery)>=1.3?0:1,limit:!0},t.window=function(t){return e(window)._scrollable()},e.fn._scrollable=function(){return this.map(function(){var t=this;if(!(!t.nodeName||-1!=e.inArray(t.nodeName.toLowerCase(),["iframe","#document","html","body"])))return t;var a=(t.contentWindow||t).document||t.ownerDocument||t;return/webkit/i.test(navigator.userAgent)||"BackCompat"==a.compatMode?a.body:a.documentElement})},e.fn.scrollTo=function(n,r,i){return"object"==typeof r&&(i=r,r=0),"function"==typeof i&&(i={onAfter:i}),"max"==n&&(n=9e9),i=e.extend({},t.defaults,i),r=r||i.duration,i.queue=i.queue&&i.axis.length>1,i.queue&&(r/=2),i.offset=a(i.offset),i.over=a(i.over),this._scrollable().each(function(){if(null!=n){var o,s=this,l=e(s),u=n,c={},h=l.is("html,body");switch(typeof u){case"number":case"string":if(/^([+-]=?)?\d+(\.\d+)?(px|%)?$/.test(u)){u=a(u);break}if(!(u=e(u,this)).length)return;case"object":(u.is||u.style)&&(o=(u=e(u)).offset())}e.each(i.axis.split(""),function(e,a){var n="x"==a?"Left":"Top",r=n.toLowerCase(),p="scroll"+n,d=s[p],m=t.max(s,a);if(o)c[p]=o[r]+(h?0:d-l.offset()[r]),i.margin&&(c[p]-=parseInt(u.css("margin"+n))||0,c[p]-=parseInt(u.css("border"+n+"Width"))||0),c[p]+=i.offset[r]||0,i.over[r]&&(c[p]+=u["x"==a?"width":"height"]()*i.over[r]);else{var g=u[r];c[p]=g.slice&&"%"==g.slice(-1)?parseFloat(g)/100*m:g}i.limit&&/^\d+$/.test(c[p])&&(c[p]=c[p]<=0?0:Math.min(c[p],m)),!e&&i.queue&&(d!=c[p]&&f(i.onAfterFirst),delete c[p])}),f(i.onAfter)}function f(e){l.animate(c,r,i.easing,e&&function(){e.call(this,u,i)})}}).end()},t.max=function(t,a){var n="x"==a?"Width":"Height",r="scroll"+n;if(!e(t).is("html,body"))return t[r]-e(t)[n.toLowerCase()]();var i="client"+n,o=t.ownerDocument.documentElement,s=t.ownerDocument.body;return Math.max(o[r],s[r])-Math.min(o[i],s[i])}}(jQuery),function(e,t,a){var n,r,i="placeholder"in t.createElement("input"),o="placeholder"in t.createElement("textarea"),s=a.fn,l=a.valHooks;function u(e,n){var r=a(this);if(this.value==r.attr("placeholder")&&r.hasClass("placeholder"))if(r.data("placeholder-password")){if((r=r.next().show().attr("id",r.removeAttr("id").data("placeholder-id"))).prev().hide(),!0===e)return r[0].value=n;r.focus()}else this.value="",r.removeClass("placeholder"),this==t.activeElement&&this.select();return r}function c(){var e,t,n,r,i=a(this),o=this.id;if(""==this.value){if("password"==this.type){if(!i.data("placeholder-textinput")){try{e=i.clone().attr({type:"text"})}catch(i){e=a("<input>").attr(a.extend((t=this,n={},r=/^jQuery\d+$/,a.each(t.attributes,function(e,t){t.specified&&!r.test(t.name)&&(n[t.name]=t.value)}),n),{type:"text"}))}e.removeAttr("name").data("placeholder-password",!0).data("placeholder-id",o).bind("focus.placeholder",u),i.data("placeholder-textinput",e).data("placeholder-id",o).before(e)}(i=i.prev().attr("id",o).show()).next().removeAttr("id").hide()}i.addClass("placeholder"),i[0].value=i.attr("placeholder")}else i.removeClass("placeholder")}i&&o?(r=s.placeholder=function(){return this}).input=r.textarea=!0:((r=s.placeholder=function(){return this.filter((i?"textarea":":input")+"[placeholder]").not(".placeholder").bind({"focus.placeholder":u,"blur.placeholder":c}).data("placeholder-enabled",!0).trigger("blur.placeholder"),this}).input=i,r.textarea=o,n={get:function(e){var t=a(e);return t.data("placeholder-enabled")&&t.hasClass("placeholder")?"":e.value},set:function(e,n){var r=a(e);return r.data("placeholder-enabled")?(""==n?(e.value=n,e!=t.activeElement&&c.call(e)):r.hasClass("placeholder")?(u.call(e,!0,n),e.value=n):e.value=n,r):e.value=n}},i||(l.input=n),o||(l.textarea=n),a(function(){a(t).delegate("form","submit.placeholder",function(){var e=a();a(".placeholder",this).each(function(){e=e.add(u.call(this))}),setTimeout(function(){e.each(c)},10)})}),a(e).bind("beforeunload.placeholder",function(){a(".placeholder").each(function(){this.value=""})}))}(this,document,jQuery),void 0===window.console&&(window.console={}),void 0===window.console.emulated&&("function"==typeof window.console.log?window.console.hasLog=!0:(void 0===window.console.log&&(window.console.log=function(){}),window.console.hasLog=!1),"function"==typeof window.console.debug?window.console.hasDebug=!0:(void 0===window.console.debug&&(window.console.debug=window.console.hasLog?function(){for(var e=["console.debug:"],t=0;t<arguments.length;t++)e.push(arguments[t]);window.console.log.apply(window.console,e)}:function(){}),window.console.hasDebug=!1),"function"==typeof window.console.warn?window.console.hasWarn=!0:(void 0===window.console.warn&&(window.console.warn=window.console.hasLog?function(){for(var e=["console.warn:"],t=0;t<arguments.length;t++)e.push(arguments[t]);window.console.log.apply(window.console,e)}:function(){}),window.console.hasWarn=!1),"function"==typeof window.console.error?window.console.hasError=!0:(void 0===window.console.error&&(window.console.error=function(){var e="An error has occured.";if(window.console.hasLog){e=["console.error:"];for(var t=0;t<arguments.length;t++)e.push(arguments[t]);window.console.log.apply(window.console,e),e="An error has occured. More information is available in your browser's javascript console."}for(t=0;t<arguments.length&&"string"==typeof arguments[t];++t)e=e+"\n"+arguments[t];if("undefined"!=typeof Error)throw Error(e);throw e}),window.console.hasError=!1),"function"==typeof window.console.trace?window.console.hasTrace=!0:(void 0===window.console.trace&&(window.console.trace=function(){window.console.error("console.trace does not exist")}),window.console.hasTrace=!1),window.console.emulated=!0),function(e){e.History?window.console.warn("$.History has already been defined..."):(e.History={options:{debug:!1},state:"",$window:null,$iframe:null,handlers:{generic:[],specific:{}},extractHash:function(e){return e.replace(/^[^#]*#/,"").replace(/^#+|#+$/,"")},getState:function(){return e.History.state},setState:function(t){var a=e.History;t=a.extractHash(t);return a.state=t,a.state},getHash:function(){return e.History.extractHash(window.location.hash||location.hash)},setHash:function(t){return t=e.History.extractHash(t),void 0!==window.location.hash?window.location.hash!==t&&(window.location.hash=t):location.hash!==t&&(location.hash=t),t},go:function(t){var a=e.History,n=(t=a.extractHash(t),a.getHash()),r=a.getState();return t!==n?a.setHash(t):(t!==r&&a.setState(t),a.trigger()),!0},hashchange:function(){var t=e.History,a=t.getHash();return t.go(a),!0},bind:function(t,a){var n=e.History;return a?(void 0===n.handlers.specific[t]&&(n.handlers.specific[t]=[]),n.handlers.specific[t].push(a)):n.handlers.generic.push(t),!0},trigger:function(t){var a,n,r,i=e.History;if(void 0===t&&(t=i.getState()),void 0!==i.handlers.specific[t])for(a=0,n=(r=i.handlers.specific[t]).length;a<n;++a)(0,r[a])(t);for(a=0,n=(r=i.handlers.generic).length;a<n;++a)(0,r[a])(t);return!0},construct:function(){var t=e.History;return e(document).ready(function(){t.domReady()}),!0},configure:function(t){var a=e.History;return a.options=e.extend(a.options,t),!0},domReadied:!1,domReady:function(){var t=e.History;if(!t.domRedied)return t.domRedied=!0,t.$window=e(window),t.$window.bind("hashchange",this.hashchange),setTimeout(t.hashchangeLoader,200),!0},nativeSupport:function(t){var a=(t=t||e.browser).version,n=parseInt(a,10),r=a.split(/[^0-9]/g),i=(a=parseInt(r[0],10),parseInt(r[1],10)),o=(r=parseInt(r[2],10),!1);return t.msie&&n>=8?o=!0:t.webkit&&n>=528?o=!0:t.mozilla?a>1?o=!0:1===a&&(i>9?o=!0:9===i&&r>=2&&(o=!0)):t.opera&&(a>10?o=!0:10===a&&i>=60&&(o=!0)),o},hashchangeLoader:function(){var t=e.History;if(t.nativeSupport())t.getHash()&&t.$window.trigger("hashchange");else{var a;if(e.browser.msie){t.$iframe=e('<iframe id="jquery-history-iframe" style="display: none;"></$iframe>').prependTo(document.body)[0],t.$iframe.contentWindow.document.open(),t.$iframe.contentWindow.document.close();var n=!1;a=function(){var e=t.getHash(),a=t.getState(),r=t.extractHash(t.$iframe.contentWindow.document.location.hash);a!==e?(n||(t.$iframe.contentWindow.document.open(),t.$iframe.contentWindow.document.close(),t.$iframe.contentWindow.document.location.hash=e),n=!1,t.$window.trigger("hashchange")):a!==r&&(n=!0,t.setHash(r))}}else a=function(){var e=t.getHash();t.getState()!==e&&t.$window.trigger("hashchange")};setInterval(a,200)}return!0}},e.History.construct())}(jQuery),function(e){"use strict";function t(t){var a=t.data;t.isDefaultPrevented()||(t.preventDefault(),e(this).ajaxSubmit(a))}function a(t){var a=t.target,n=e(a);if(!n.is("[type=submit],[type=image]")){var r=n.closest("[type=submit]");if(0===r.length)return;a=r[0]}var i=this;if(i.clk=a,"image"==a.type)if(void 0!==t.offsetX)i.clk_x=t.offsetX,i.clk_y=t.offsetY;else if("function"==typeof e.fn.offset){var o=n.offset();i.clk_x=t.pageX-o.left,i.clk_y=t.pageY-o.top}else i.clk_x=t.pageX-a.offsetLeft,i.clk_y=t.pageY-a.offsetTop;setTimeout(function(){i.clk=i.clk_x=i.clk_y=null},100)}function n(){if(e.fn.ajaxSubmit.debug){var t="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(t):window.opera&&window.opera.postError&&window.opera.postError(t)}}var r={};r.fileapi=void 0!==e("<input type='file'/>").get(0).files,r.formdata=void 0!==window.FormData;var i=!!e.fn.prop;e.fn.attr2=function(){if(!i)return this.attr.apply(this,arguments);var e=this.prop.apply(this,arguments);return e&&e.jquery||"string"==typeof e?e:this.attr.apply(this,arguments)},e.fn.ajaxSubmit=function(t){function a(a){function r(e){var t=null;try{e.contentWindow&&(t=e.contentWindow.document)}catch(e){n("cannot get iframe.contentWindow document: "+e)}if(t)return t;try{t=e.contentDocument?e.contentDocument:e.document}catch(a){n("cannot get iframe.contentDocument: "+a),t=e.document}return t}function s(){var t=u.attr2("target"),a=u.attr2("action");j.setAttribute("target",m),(!o||/post/i.test(o))&&j.setAttribute("method","POST"),a!=f.url&&j.setAttribute("action",f.url),f.skipEncodingOverride||o&&!/post/i.test(o)||u.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),f.timeout&&(T=setTimeout(function(){b=!0,l(S)},f.timeout));var i=[];try{if(f.extraData)for(var s in f.extraData)f.extraData.hasOwnProperty(s)&&(e.isPlainObject(f.extraData[s])&&f.extraData[s].hasOwnProperty("name")&&f.extraData[s].hasOwnProperty("value")?i.push(e('<input type="hidden" name="'+f.extraData[s].name+'">').val(f.extraData[s].value).appendTo(j)[0]):i.push(e('<input type="hidden" name="'+s+'">').val(f.extraData[s]).appendTo(j)[0]));f.iframeTarget||g.appendTo("body"),v.attachEvent?v.attachEvent("onload",l):v.addEventListener("load",l,!1),setTimeout(function e(){try{var t=r(v).readyState;n("state = "+t),t&&"uninitialized"==t.toLowerCase()&&setTimeout(e,50)}catch(e){n("Server abort: ",e," (",e.name,")"),l(E),T&&clearTimeout(T),T=void 0}},15);try{j.submit()}catch(e){document.createElement("form").submit.apply(j)}}finally{j.setAttribute("action",a),t?j.setAttribute("target",t):u.removeAttr("target"),e(i).remove()}}function l(t){if(!_.aborted&&!L){if((A=r(v))||(n("cannot access response document"),t=E),t===S&&_)return _.abort("timeout"),void x.reject(_,"timeout");if(t==E&&_)return _.abort("server abort"),void x.reject(_,"error","server abort");if(A&&A.location.href!=f.iframeSrc||b){v.detachEvent?v.detachEvent("onload",l):v.removeEventListener("load",l,!1);var a,i="success";try{if(b)throw"timeout";var o="xml"==f.dataType||A.XMLDocument||e.isXMLDoc(A);if(n("isXml="+o),!o&&window.opera&&(null===A.body||!A.body.innerHTML)&&--k)return n("requeing onLoad callback, DOM not available"),void setTimeout(l,250);var s=A.body?A.body:A.documentElement;_.responseText=s?s.innerHTML:null,_.responseXML=A.XMLDocument?A.XMLDocument:A,o&&(f.dataType="xml"),_.getResponseHeader=function(e){return{"content-type":f.dataType}[e.toLowerCase()]},s&&(_.status=Number(s.getAttribute("status"))||_.status,_.statusText=s.getAttribute("statusText")||_.statusText);var u=(f.dataType||"").toLowerCase(),c=/(json|script|text)/.test(u);if(c||f.textarea){var h=A.getElementsByTagName("textarea")[0];if(h)_.responseText=h.value,_.status=Number(h.getAttribute("status"))||_.status,_.statusText=h.getAttribute("statusText")||_.statusText;else if(c){var p=A.getElementsByTagName("pre")[0],m=A.getElementsByTagName("body")[0];p?_.responseText=p.textContent?p.textContent:p.innerText:m&&(_.responseText=m.textContent?m.textContent:m.innerText)}}else"xml"==u&&!_.responseXML&&_.responseText&&(_.responseXML=M(_.responseText));try{D=R(_,u,f)}catch(e){i="parsererror",_.error=a=e||i}}catch(e){n("error caught: ",e),i="error",_.error=a=e||i}_.aborted&&(n("upload aborted"),i=null),_.status&&(i=_.status>=200&&300>_.status||304===_.status?"success":"error"),"success"===i?(f.success&&f.success.call(f.context,D,"success",_),x.resolve(_.responseText,"success",_),d&&e.event.trigger("ajaxSuccess",[_,f])):i&&(void 0===a&&(a=_.statusText),f.error&&f.error.call(f.context,_,i,a),x.reject(_,"error",a),d&&e.event.trigger("ajaxError",[_,f,a])),d&&e.event.trigger("ajaxComplete",[_,f]),d&&!--e.active&&e.event.trigger("ajaxStop"),f.complete&&f.complete.call(f.context,_,i),L=!0,f.timeout&&clearTimeout(T),setTimeout(function(){f.iframeTarget?g.attr("src",f.iframeSrc):g.remove(),_.responseXML=null},100)}}}var c,h,f,d,m,g,v,_,w,y,b,T,j=u[0],x=e.Deferred();if(x.abort=function(e){_.abort(e)},a)for(h=0;p.length>h;h++)c=e(p[h]),i?c.prop("disabled",!1):c.removeAttr("disabled");if((f=e.extend(!0,{},e.ajaxSettings,t)).context=f.context||f,m="jqFormIO"+(new Date).getTime(),f.iframeTarget?(y=(g=e(f.iframeTarget)).attr2("name"))?m=y:g.attr2("name",m):(g=e('<iframe name="'+m+'" src="'+f.iframeSrc+'" />')).css({position:"absolute",top:"-1000px",left:"-1000px"}),v=g[0],_={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(t){var a="timeout"===t?"timeout":"aborted";n("aborting upload... "+a),this.aborted=1;try{v.contentWindow.document.execCommand&&v.contentWindow.document.execCommand("Stop")}catch(e){}g.attr("src",f.iframeSrc),_.error=a,f.error&&f.error.call(f.context,_,a,t),d&&e.event.trigger("ajaxError",[_,f,a]),f.complete&&f.complete.call(f.context,_,a)}},(d=f.global)&&0==e.active++&&e.event.trigger("ajaxStart"),d&&e.event.trigger("ajaxSend",[_,f]),f.beforeSend&&!1===f.beforeSend.call(f.context,_,f))return f.global&&e.active--,x.reject(),x;if(_.aborted)return x.reject(),x;(w=j.clk)&&((y=w.name)&&!w.disabled&&(f.extraData=f.extraData||{},f.extraData[y]=w.value,"image"==w.type&&(f.extraData[y+".x"]=j.clk_x,f.extraData[y+".y"]=j.clk_y)));var S=1,E=2,C=e("meta[name=csrf-token]").attr("content"),O=e("meta[name=csrf-param]").attr("content");O&&C&&(f.extraData=f.extraData||{},f.extraData[O]=C),f.forceSync?s():setTimeout(s,10);var D,A,L,k=50,M=e.parseXML||function(e,t){return window.ActiveXObject?((t=new ActiveXObject("Microsoft.XMLDOM")).async="false",t.loadXML(e)):t=(new DOMParser).parseFromString(e,"text/xml"),t&&t.documentElement&&"parsererror"!=t.documentElement.nodeName?t:null},I=e.parseJSON||function(e){return window.eval("("+e+")")},R=function(t,a,n){var r=t.getResponseHeader("content-type")||"",i="xml"===a||!a&&r.indexOf("xml")>=0,o=i?t.responseXML:t.responseText;return i&&"parsererror"===o.documentElement.nodeName&&e.error&&e.error("parsererror"),n&&n.dataFilter&&(o=n.dataFilter(o,a)),"string"==typeof o&&("json"===a||!a&&r.indexOf("json")>=0?o=I(o):("script"===a||!a&&r.indexOf("javascript")>=0)&&e.globalEval(o)),o};return x}if(!this.length)return n("ajaxSubmit: skipping submit process - no element selected"),this;var o,s,l,u=this;"function"==typeof t?t={success:t}:void 0===t&&(t={}),o=t.type||this.attr2("method"),(l=(l="string"==typeof(s=t.url||this.attr2("action"))?e.trim(s):"")||window.location.href||"")&&(l=(l.match(/^([^#]+)/)||[])[1]),t=e.extend(!0,{url:l,success:e.ajaxSettings.success,type:o||e.ajaxSettings.type,iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},t);var c={};if(this.trigger("form-pre-serialize",[this,t,c]),c.veto)return n("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(t.beforeSerialize&&!1===t.beforeSerialize(this,t))return n("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var h=t.traditional;void 0===h&&(h=e.ajaxSettings.traditional);var f,p=[],d=this.formToArray(t.semantic,p);if(t.data&&(t.extraData=t.data,f=e.param(t.data,h)),t.beforeSubmit&&!1===t.beforeSubmit(d,this,t))return n("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[d,this,t,c]),c.veto)return n("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var m=e.param(d,h);f&&(m=m?m+"&"+f:f),"GET"==t.type.toUpperCase()?(t.url+=(t.url.indexOf("?")>=0?"&":"?")+m,t.data=null):t.data=m;var g=[];if(t.resetForm&&g.push(function(){u.resetForm()}),t.clearForm&&g.push(function(){u.clearForm(t.includeHidden)}),!t.dataType&&t.target){var v=t.success||function(){};g.push(function(a){var n=t.replaceTarget?"replaceWith":"html";e(t.target)[n](a).each(v,arguments)})}else t.success&&g.push(t.success);if(t.success=function(e,a,n){for(var r=t.context||this,i=0,o=g.length;o>i;i++)g[i].apply(r,[e,a,n||u,u])},t.error){var _=t.error;t.error=function(e,a,n){var r=t.context||this;_.apply(r,[e,a,n,u])}}if(t.complete){var w=t.complete;t.complete=function(e,a){var n=t.context||this;w.apply(n,[e,a,u])}}var y=e("input[type=file]:enabled",this).filter(function(){return""!=e(this).val()}).length>0,b="multipart/form-data",T=u.attr("enctype")==b||u.attr("encoding")==b,j=r.fileapi&&r.formdata;n("fileAPI :"+j);var x,S=(y||T)&&!j;!1!==t.iframe&&(t.iframe||S)?t.closeKeepAlive?e.get(t.closeKeepAlive,function(){x=a(d)}):x=a(d):x=(y||T)&&j?function(a){for(var n=new FormData,r=0;a.length>r;r++)n.append(a[r].name,a[r].value);if(t.extraData){var i=function(a){var n,r,i=e.param(a,t.traditional).split("&"),o=i.length,s=[];for(n=0;o>n;n++)i[n]=i[n].replace(/\+/g," "),r=i[n].split("="),s.push([decodeURIComponent(r[0]),decodeURIComponent(r[1])]);return s}(t.extraData);for(r=0;i.length>r;r++)i[r]&&n.append(i[r][0],i[r][1])}t.data=null;var s=e.extend(!0,{},e.ajaxSettings,t,{contentType:!1,processData:!1,cache:!1,type:o||"POST"});t.uploadProgress&&(s.xhr=function(){var a=e.ajaxSettings.xhr();return a.upload&&a.upload.addEventListener("progress",function(e){var a=0,n=e.loaded||e.position,r=e.total;e.lengthComputable&&(a=Math.ceil(n/r*100)),t.uploadProgress(e,n,r,a)},!1),a}),s.data=null;var l=s.beforeSend;return s.beforeSend=function(e,t){t.data=n,l&&l.call(this,e,t)},e.ajax(s)}(d):e.ajax(t),u.removeData("jqxhr").data("jqxhr",x);for(var E=0;p.length>E;E++)p[E]=null;return this.trigger("form-submit-notify",[this,t]),this},e.fn.ajaxForm=function(r){if((r=r||{}).delegation=r.delegation&&e.isFunction(e.fn.on),!r.delegation&&0===this.length){var i={s:this.selector,c:this.context};return!e.isReady&&i.s?(n("DOM not ready, queuing ajaxForm"),e(function(){e(i.s,i.c).ajaxForm(r)}),this):(n("terminating; zero elements found by selector"+(e.isReady?"":" (DOM not ready)")),this)}return r.delegation?(e(document).off("submit.form-plugin",this.selector,t).off("click.form-plugin",this.selector,a).on("submit.form-plugin",this.selector,r,t).on("click.form-plugin",this.selector,r,a),this):this.ajaxFormUnbind().bind("submit.form-plugin",r,t).bind("click.form-plugin",r,a)},e.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")},e.fn.formToArray=function(t,a){var n=[];if(0===this.length)return n;var i,o,s,l,u,c,h,f=this[0],p=t?f.getElementsByTagName("*"):f.elements;if(!p)return n;for(i=0,c=p.length;c>i;i++)if((s=(u=p[i]).name)&&!u.disabled)if(t&&f.clk&&"image"==u.type)f.clk==u&&(n.push({name:s,value:e(u).val(),type:u.type}),n.push({name:s+".x",value:f.clk_x},{name:s+".y",value:f.clk_y}));else if((l=e.fieldValue(u,!0))&&l.constructor==Array)for(a&&a.push(u),o=0,h=l.length;h>o;o++)n.push({name:s,value:l[o]});else if(r.fileapi&&"file"==u.type){a&&a.push(u);var d=u.files;if(d.length)for(o=0;d.length>o;o++)n.push({name:s,value:d[o],type:u.type});else n.push({name:s,value:"",type:u.type})}else null!=l&&(a&&a.push(u),n.push({name:s,value:l,type:u.type,required:u.required}));if(!t&&f.clk){var m=e(f.clk),g=m[0];(s=g.name)&&!g.disabled&&"image"==g.type&&(n.push({name:s,value:m.val()}),n.push({name:s+".x",value:f.clk_x},{name:s+".y",value:f.clk_y}))}return n},e.fn.formSerialize=function(t){return e.param(this.formToArray(t))},e.fn.fieldSerialize=function(t){var a=[];return this.each(function(){var n=this.name;if(n){var r=e.fieldValue(this,t);if(r&&r.constructor==Array)for(var i=0,o=r.length;o>i;i++)a.push({name:n,value:r[i]});else null!=r&&a.push({name:this.name,value:r})}}),e.param(a)},e.fn.fieldValue=function(t){for(var a=[],n=0,r=this.length;r>n;n++){var i=this[n],o=e.fieldValue(i,t);null==o||o.constructor==Array&&!o.length||(o.constructor==Array?e.merge(a,o):a.push(o))}return a},e.fieldValue=function(t,a){var n=t.name,r=t.type,i=t.tagName.toLowerCase();if(void 0===a&&(a=!0),a&&(!n||t.disabled||"reset"==r||"button"==r||("checkbox"==r||"radio"==r)&&!t.checked||("submit"==r||"image"==r)&&t.form&&t.form.clk!=t||"select"==i&&-1==t.selectedIndex))return null;if("select"==i){var o=t.selectedIndex;if(0>o)return null;for(var s=[],l=t.options,u="select-one"==r,c=u?o+1:l.length,h=u?o:0;c>h;h++){var f=l[h];if(f.selected){var p=f.value;if(p||(p=f.attributes&&f.attributes.value&&!f.attributes.value.specified?f.text:f.value),u)return p;s.push(p)}}return s}return e(t).val()},e.fn.clearForm=function(t){return this.each(function(){e("input,select,textarea",this).clearFields(t)})},e.fn.clearFields=e.fn.clearInputs=function(t){var a=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var n=this.type,r=this.tagName.toLowerCase();a.test(n)||"textarea"==r?this.value="":"checkbox"==n||"radio"==n?this.checked=!1:"select"==r?this.selectedIndex=-1:"file"==n?/MSIE/.test(navigator.userAgent)?e(this).replaceWith(e(this).clone(!0)):e(this).val(""):t&&(!0===t&&/hidden/.test(n)||"string"==typeof t&&e(this).is(t))&&(this.value="")})},e.fn.resetForm=function(){return this.each(function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()})},e.fn.enable=function(e){return void 0===e&&(e=!0),this.each(function(){this.disabled=!e})},e.fn.selected=function(t){return void 0===t&&(t=!0),this.each(function(){var a=this.type;if("checkbox"==a||"radio"==a)this.checked=t;else if("option"==this.tagName.toLowerCase()){var n=e(this).parent("select");t&&n[0]&&"select-one"==n[0].type&&n.find("option").selected(!1),this.selected=t}})},e.fn.ajaxSubmit.debug=!1}("undefined"!=typeof jQuery?jQuery:window.Zepto),function(e){e.fn.extend({autocomplete:function(t,a){var n="string"==typeof t;return(a=e.extend({},e.Autocompleter.defaults,{url:n?t:null,data:n?null:t,delay:n?e.Autocompleter.defaults.delay:10,max:a&&!a.scroll?10:150,noRecord:"No Records."},a)).highlight=a.highlight||function(e){return e},a.formatMatch=a.formatMatch||a.formatItem,this.each(function(){new e.Autocompleter(this,a)})},result:function(e){return this.bind("result",e)},search:function(e){return this.trigger("search",[e])},flushCache:function(){return this.trigger("flushCache")},setOptions:function(e){return this.trigger("setOptions",[e])},unautocomplete:function(){return this.trigger("unautocomplete")}}),e.Autocompleter=function(t,a){var n={UP:38,DOWN:40,DEL:46,TAB:9,RETURN:13,ESC:27,COMMA:188,PAGEUP:33,PAGEDOWN:34,BACKSPACE:8},r=null;null!=a.failure&&"function"==typeof a.failure&&(r=a.failure);var i,o,s,l=e(t).attr("autocomplete","off").addClass(a.inputClass),u="",c=e.Autocompleter.Cache(a),h=0,f={mouseDownOnSelect:!1},p=e.Autocompleter.Select(a,t,d,f);function d(){var n=p.selected();if(!n)return!1;var r=n.result;if(u=r,a.multiple){var i=g(l.val());if(i.length>1){var o,s=a.multipleSeparator.length,c=e(t).selection().start,h=0;e.each(i,function(e,t){if(h+=t.length,c<=h)return o=e,!1;h+=s}),i[o]=r,r=i.join(a.multipleSeparator)}r+=a.multipleSeparator}return l.val(r),_(),l.trigger("result",[n.data,n.value]),!0}function m(e,t){if(o!=n.DEL){var r=l.val();(t||r!=u)&&(u=r,(r=v(r)).length>=a.minChars?(l.addClass(a.loadingClass),a.matchCase||(r=r.toLowerCase()),y(r,w,_)):(T(),p.hide()))}else p.hide()}function g(t){return t?a.multiple?e.map(t.split(a.multipleSeparator),function(a){return e.trim(t).length?e.trim(a):null}):[e.trim(t)]:[""]}function v(n){if(!a.multiple)return n;var r=g(n);if(1==r.length)return r[0];var i=e(t).selection().start;return(r=i==n.length?g(n):g(n.replace(n.substring(i),"")))[r.length-1]}function _(){p.visible();p.hide(),clearTimeout(i),T(),a.mustMatch&&l.search(function(e){if(!e)if(a.multiple){var t=g(l.val()).slice(0,-1);l.val(t.join(a.multipleSeparator)+(t.length?a.multipleSeparator:""))}else l.val(""),l.trigger("result",null)})}function w(r,i){i&&i.length&&h?(T(),p.display(i,r),function(r,i){a.autoFill&&v(l.val()).toLowerCase()==r.toLowerCase()&&o!=n.BACKSPACE&&(l.val(l.val()+i.substring(v(u).length)),e(t).selection(u.length,u.length+i.length))}(r,i[0].value),p.show()):_()}function y(n,i,o){a.matchCase||(n=n.toLowerCase());var s=c.load(n);if(s)if(s.length)i(n,s);else{var l=a.parse&&a.parse(a.noRecord)||b(a.noRecord);i(n,l)}else if("string"==typeof a.url&&a.url.length>0){var u={timestamp:+new Date};e.each(a.extraParams,function(e,t){u[e]="function"==typeof t?t():t}),e.ajax({mode:"abort",port:"autocomplete"+t.name,dataType:a.dataType,url:a.url,data:e.extend({q:v(n),limit:a.max},u),type:"POST",success:function(e){var t=a.parse&&a.parse(e)||b(e);c.add(n,t),i(n,t)}})}else p.emptyList(),null!=r?r():o(n)}function b(t){for(var n=[],r=t.split("\n"),i=0;i<r.length;i++){var o=e.trim(r[i]);o&&(o=o.split("|"),n[n.length]={data:o,value:o[0],result:a.formatResult&&a.formatResult(o,o[0])||o[0]})}return n}function T(){l.removeClass(a.loadingClass)}-1!=navigator.userAgent.indexOf("Opera")&&e(t.form).bind("submit.autocomplete",function(){if(s)return s=!1,!1}),l.bind((-1!=navigator.userAgent.indexOf("Opera")&&!1 in window?"keypress":"keydown")+".autocomplete",function(t){switch(h=1,o=t.keyCode,t.keyCode){case n.UP:p.visible()?(t.preventDefault(),p.prev()):m(0,!0);break;case n.DOWN:p.visible()?(t.preventDefault(),p.next()):m(0,!0);break;case n.PAGEUP:p.visible()?(t.preventDefault(),p.pageUp()):m(0,!0);break;case n.PAGEDOWN:p.visible()?(t.preventDefault(),p.pageDown()):m(0,!0);break;case a.multiple&&","==e.trim(a.multipleSeparator)&&n.COMMA:case n.TAB:case n.RETURN:if(d())return t.preventDefault(),s=!0,!1;break;case n.ESC:p.hide();break;default:clearTimeout(i),i=setTimeout(m,a.delay)}}).focus(function(){h++}).blur(function(){h=0,f.mouseDownOnSelect||(clearTimeout(i),i=setTimeout(_,200))}).click(function(){a.clickFire?p.visible()||m(0,!0):h++>1&&!p.visible()&&m(0,!0)}).bind("search",function(){var t=arguments.length>1?arguments[1]:null;function a(e,a){var n;if(a&&a.length)for(var r=0;r<a.length;r++)if(a[r].result.toLowerCase()==e.toLowerCase()){n=a[r];break}"function"==typeof t?t(n):l.trigger("result",n&&[n.data,n.value])}e.each(g(l.val()),function(e,t){y(t,a,a)})}).bind("flushCache",function(){c.flush()}).bind("setOptions",function(){e.extend(!0,a,arguments[1]),"data"in arguments[1]&&c.populate()}).bind("unautocomplete",function(){p.unbind(),l.unbind(),e(t.form).unbind(".autocomplete")})},e.Autocompleter.defaults={inputClass:"ac_input",resultsClass:"ac_results",loadingClass:"ac_loading",minChars:1,delay:400,matchCase:!1,matchSubset:!0,matchContains:!1,cacheLength:100,max:1e3,mustMatch:!1,extraParams:{},selectFirst:!0,formatItem:function(e){return e[0]},formatMatch:null,autoFill:!1,width:0,multiple:!1,multipleSeparator:" ",inputFocus:!0,clickFire:!1,highlight:function(e,t){return e.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+t.replace(/([\^\$\(\)\[\]\{\}\*\.\+\?\|\\])/gi,"\\$1")+")(?![^<>]*>)(?![^&;]+;)","gi"),"<strong>$1</strong>")},scroll:!0,scrollHeight:180,scrollJumpPosition:!0},e.Autocompleter.Cache=function(t){var a={},n=0;function r(e,a){t.matchCase||(e=e.toLowerCase());var n=e.indexOf(a);return"word"==t.matchContains&&(n=e.toLowerCase().search("\\b"+a.toLowerCase())),-1!=n&&(0==n||t.matchContains)}function i(e,r){n>t.cacheLength&&s(),a[e]||n++,a[e]=r}function o(){if(!t.data)return!1;var a={},n=0;t.url||(t.cacheLength=1),a[""]=[];for(var r=0,o=t.data.length;r<o;r++){var s=t.data[r];s="string"==typeof s?[s]:s;var l=t.formatMatch(s,r+1,t.data.length);if(void 0!==l&&!1!==l){var u=l.charAt(0).toLowerCase();a[u]||(a[u]=[]);var c={value:l,data:s,result:t.formatResult&&t.formatResult(s)||l};a[u].push(c),n++<t.max&&a[""].push(c)}}e.each(a,function(e,a){t.cacheLength++,i(e,a)})}function s(){a={},n=0}return setTimeout(o,25),{flush:s,add:i,populate:o,load:function(i){if(!t.cacheLength||!n)return null;if(!t.url&&t.matchContains){var o=[];for(var s in a)if(s.length>0){var l=a[s];e.each(l,function(e,t){r(t.value,i)&&o.push(t)})}return o}if(a[i])return a[i];if(t.matchSubset)for(var u=i.length-1;u>=t.minChars;u--){if(l=a[i.substr(0,u)]){o=[];return e.each(l,function(e,t){r(t.value,i)&&(o[o.length]=t)}),o}}return null}}},e.Autocompleter.Select=function(t,a,n,r){var i,o,s,l,u={ACTIVE:"ac_over"},c=-1,h="",f=!0;function p(e){for(var t=e.target;t&&"LI"!=t.tagName;)t=t.parentNode;return t||[]}function d(e){i.slice(c,c+1).removeClass(u.ACTIVE),function(e){(t.scrollJumpPosition||!t.scrollJumpPosition&&!(e<0&&0==c||e>0&&c==i.size()-1))&&((c+=e)<0?c=i.size()-1:c>=i.size()&&(c=0))}(e);var a=i.slice(c,c+1).addClass(u.ACTIVE);if(t.scroll){var n=0;i.slice(0,c).each(function(){n+=this.offsetHeight}),n+a[0].offsetHeight-l.scrollTop()>l[0].clientHeight?l.scrollTop(n+a[0].offsetHeight-l.innerHeight()):n<l.scrollTop()&&l.scrollTop(n)}}function m(){l.empty();for(var a,n=(a=o.length,t.max&&t.max<a?t.max:a),r=0;r<n;r++)if(o[r]){var s=t.formatItem(o[r].data,r+1,n,o[r].value,h);if(!1!==s){var f=e("<li/>").html(t.highlight(s,h)).addClass(r%2==0?"ac_even":"ac_odd").appendTo(l)[0];e.data(f,"ac_data",o[r])}}i=l.find("li"),t.selectFirst&&(i.slice(0,1).addClass(u.ACTIVE),c=0),e.fn.bgiframe&&l.bgiframe()}return{display:function(i,d){f&&(s=e("<div/>").hide().addClass(t.resultsClass).css("position","absolute").appendTo(document.body).hover(function(t){e(this).is(":visible")&&a.focus(),r.mouseDownOnSelect=!1}),l=e("<ul/>").appendTo(s).mouseover(function(t){p(t).nodeName&&"LI"==p(t).nodeName.toUpperCase()&&(c=e("li",l).removeClass(u.ACTIVE).index(p(t)),e(p(t)).addClass(u.ACTIVE))}).click(function(r){return e(p(r)).addClass(u.ACTIVE),n(),t.inputFocus&&a.focus(),!1}).mousedown(function(){r.mouseDownOnSelect=!0}).mouseup(function(){r.mouseDownOnSelect=!1}),t.width>0&&s.css("width",t.width),f=!1),o=i,h=d,m()},next:function(){d(1)},prev:function(){d(-1)},pageUp:function(){d(0!=c&&c-8<0?-c:-8)},pageDown:function(){c!=i.size()-1&&c+8>i.size()?d(i.size()-1-c):d(8)},hide:function(){s&&s.hide(),i&&i.removeClass(u.ACTIVE),c=-1},visible:function(){return s&&s.is(":visible")},current:function(){return this.visible()&&(i.filter("."+u.ACTIVE)[0]||t.selectFirst&&i[0])},show:function(){var n=e(a).offset();if(s.css({width:"string"==typeof t.width||t.width>0?t.width:e(a).width(),top:n.top+a.offsetHeight,left:n.left}).show(),t.scroll&&(l.scrollTop(0),l.css({maxHeight:t.scrollHeight,overflow:"auto"}),-1!=navigator.userAgent.indexOf("MSIE")&&void 0===document.body.style.maxHeight)){var r=0;i.each(function(){r+=this.offsetHeight});var o=r>t.scrollHeight;l.css("height",o?t.scrollHeight:r),o||i.width(l.width()-parseInt(i.css("padding-left"))-parseInt(i.css("padding-right")))}},selected:function(){var t=i&&i.filter("."+u.ACTIVE).removeClass(u.ACTIVE);return t&&t.length&&e.data(t[0],"ac_data")},emptyList:function(){l&&l.empty()},unbind:function(){s&&s.remove()}}},e.fn.selection=function(e,t){if(void 0!==e)return this.each(function(){if(this.createTextRange){var a=this.createTextRange();void 0===t||e==t?(a.move("character",e),a.select()):(a.collapse(!0),a.moveStart("character",e),a.moveEnd("character",t),a.select())}else this.setSelectionRange?this.setSelectionRange(e,t):this.selectionStart&&(this.selectionStart=e,this.selectionEnd=t)});var a=this[0];if(a.createTextRange){var n=document.selection.createRange(),r=a.value,i=n.text.length;n.text="<->";var o=a.value.indexOf("<->");return a.value=r,this.selection(o,o+i),{start:o,end:o+i}}return void 0!==a.selectionStart?{start:a.selectionStart,end:a.selectionEnd}:void 0}}(jQuery),function(){var e=window.jQuery||window.$||(window.$={}),t={parse:window.JSON&&(window.JSON.parse||window.JSON.decode)||String.prototype.evalJSON&&function(e){return String(e).evalJSON()}||e.parseJSON||e.evalJSON,stringify:Object.toJSON||window.JSON&&(window.JSON.stringify||window.JSON.encode)||e.toJSON};if(!("parse"in t&&"stringify"in t))throw new Error("No JSON support found, include //cdnjs.cloudflare.com/ajax/libs/json2/20110223/json2.js to page");var a,n={__jstorage_meta:{CRC32:{}}},r={jStorage:"{}"},i=null,o=0,s=!1,l={},u=!1,c=0,h={},f=+new Date,p={isXML:function(e){var t=(e?e.ownerDocument||e:0).documentElement;return!!t&&"HTML"!==t.nodeName},encode:function(e){if(!this.isXML(e))return!1;try{return(new XMLSerializer).serializeToString(e)}catch(t){try{return e.xml}catch(e){}}return!1},decode:function(e){var t,a="DOMParser"in window&&(new DOMParser).parseFromString||window.ActiveXObject&&function(e){var t=new ActiveXObject("Microsoft.XMLDOM");return t.async="false",t.loadXML(e),t};return!!a&&(t=a.call("DOMParser"in window&&new DOMParser||window,e,"text/xml"),!!this.isXML(t)&&t)}};function d(){var e="{}";if("userDataBehavior"==s){i.load("jStorage");try{e=i.getAttribute("jStorage")}catch(e){}try{c=i.getAttribute("jStorage_update")}catch(e){}r.jStorage=e}_(),b(),T()}function m(){var e;clearTimeout(u),u=setTimeout(function(){if("localStorage"==s||"globalStorage"==s)e=r.jStorage_update;else if("userDataBehavior"==s){i.load("jStorage");try{e=i.getAttribute("jStorage_update")}catch(e){}}e&&e!=c&&(c=e,function(){var e,a=t.parse(t.stringify(n.__jstorage_meta.CRC32));d(),e=t.parse(t.stringify(n.__jstorage_meta.CRC32));var r,i=[],o=[];for(r in a)if(a.hasOwnProperty(r)){if(!e[r]){o.push(r);continue}a[r]!=e[r]&&"2."==String(a[r]).substr(0,2)&&i.push(r)}for(r in e)e.hasOwnProperty(r)&&(a[r]||i.push(r));g(i,"updated"),g(o,"deleted")}())},25)}function g(e,t){if(e=[].concat(e||[]),"flushed"==t){for(var a in e=[],l)l.hasOwnProperty(a)&&e.push(a);t="deleted"}for(var n=0,r=e.length;n<r;n++){if(l[e[n]])for(var i=0,o=l[e[n]].length;i<o;i++)l[e[n]][i](e[n],t);if(l["*"])for(i=0,o=l["*"].length;i<o;i++)l["*"][i](e[n],t)}}function v(){var e=(+new Date).toString();if("localStorage"==s||"globalStorage"==s)try{r.jStorage_update=e}catch(e){s=!1}else"userDataBehavior"==s&&(i.setAttribute("jStorage_update",e),i.save("jStorage"));m()}function _(){if(r.jStorage)try{n=t.parse(String(r.jStorage))}catch(e){r.jStorage="{}"}else r.jStorage="{}";o=r.jStorage?String(r.jStorage).length:0,n.__jstorage_meta||(n.__jstorage_meta={}),n.__jstorage_meta.CRC32||(n.__jstorage_meta.CRC32={})}function w(){!function(){if(!n.__jstorage_meta.PubSub)return;for(var e=+new Date-2e3,t=0,a=n.__jstorage_meta.PubSub.length;t<a;t++)if(n.__jstorage_meta.PubSub[t][0]<=e){n.__jstorage_meta.PubSub.splice(t,n.__jstorage_meta.PubSub.length-t);break}n.__jstorage_meta.PubSub.length||delete n.__jstorage_meta.PubSub}();try{r.jStorage=t.stringify(n),i&&(i.setAttribute("jStorage",r.jStorage),i.save("jStorage")),o=r.jStorage?String(r.jStorage).length:0}catch(e){}}function y(e){if("string"!=typeof e&&"number"!=typeof e)throw new TypeError("Key name must be string or numeric");if("__jstorage_meta"==e)throw new TypeError("Reserved key name");return!0}function b(){var e,t,r,i,o=1/0,s=!1,l=[];if(clearTimeout(a),n.__jstorage_meta&&"object"==typeof n.__jstorage_meta.TTL){for(t in e=+new Date,r=n.__jstorage_meta.TTL,i=n.__jstorage_meta.CRC32,r)r.hasOwnProperty(t)&&(r[t]<=e?(delete r[t],delete i[t],delete n[t],s=!0,l.push(t)):r[t]<o&&(o=r[t]));o!=1/0&&(a=setTimeout(b,o-e)),s&&(w(),v(),g(l,"deleted"))}}function T(){var e;if(n.__jstorage_meta.PubSub){var t,a=f;for(e=n.__jstorage_meta.PubSub.length-1;e>=0;e--)(t=n.__jstorage_meta.PubSub[e])[0]>f&&(a=t[0],j(t[1],t[2]));f=a}}function j(e,a){if(h[e])for(var n=0,r=h[e].length;n<r;n++)try{h[e][n](e,t.parse(t.stringify(a)))}catch(e){}}e.jStorage={version:"0.4.8",set:function(e,a,r){if(y(e),r=r||{},void 0===a)return this.deleteKey(e),a;if(p.isXML(a))a={_is_xml:!0,xml:p.encode(a)};else{if("function"==typeof a)return;a&&"object"==typeof a&&(a=t.parse(t.stringify(a)))}return n[e]=a,n.__jstorage_meta.CRC32[e]="2."+function(e,t){for(var a,n=e.length,r=t^n,i=0;n>=4;)a=1540483477*(65535&(a=255&e.charCodeAt(i)|(255&e.charCodeAt(++i))<<8|(255&e.charCodeAt(++i))<<16|(255&e.charCodeAt(++i))<<24))+((1540483477*(a>>>16)&65535)<<16),r=1540483477*(65535&r)+((1540483477*(r>>>16)&65535)<<16)^(a=1540483477*(65535&(a^=a>>>24))+((1540483477*(a>>>16)&65535)<<16)),n-=4,++i;switch(n){case 3:r^=(255&e.charCodeAt(i+2))<<16;case 2:r^=(255&e.charCodeAt(i+1))<<8;case 1:r=1540483477*(65535&(r^=255&e.charCodeAt(i)))+((1540483477*(r>>>16)&65535)<<16)}return r=1540483477*(65535&(r^=r>>>13))+((1540483477*(r>>>16)&65535)<<16),(r^=r>>>15)>>>0}(t.stringify(a),2538058380),this.setTTL(e,r.TTL||0),g(e,"updated"),a},get:function(e,t){return y(e),e in n?n[e]&&"object"==typeof n[e]&&n[e]._is_xml?p.decode(n[e].xml):n[e]:void 0===t?null:t},deleteKey:function(e){return y(e),e in n&&(delete n[e],"object"==typeof n.__jstorage_meta.TTL&&e in n.__jstorage_meta.TTL&&delete n.__jstorage_meta.TTL[e],delete n.__jstorage_meta.CRC32[e],w(),v(),g(e,"deleted"),!0)},setTTL:function(e,t){var a=+new Date;return y(e),t=Number(t)||0,e in n&&(n.__jstorage_meta.TTL||(n.__jstorage_meta.TTL={}),t>0?n.__jstorage_meta.TTL[e]=a+t:delete n.__jstorage_meta.TTL[e],w(),b(),v(),!0)},getTTL:function(e){var t=+new Date;return y(e),e in n&&n.__jstorage_meta.TTL&&n.__jstorage_meta.TTL[e]&&n.__jstorage_meta.TTL[e]-t||0},flush:function(){return n={__jstorage_meta:{CRC32:{}}},w(),v(),g(null,"flushed"),!0},storageObj:function(){function e(){}return e.prototype=n,new e},index:function(){var e,t=[];for(e in n)n.hasOwnProperty(e)&&"__jstorage_meta"!=e&&t.push(e);return t},storageSize:function(){return o},currentBackend:function(){return s},storageAvailable:function(){return!!s},listenKeyChange:function(e,t){y(e),l[e]||(l[e]=[]),l[e].push(t)},stopListening:function(e,t){if(y(e),l[e])if(t)for(var a=l[e].length-1;a>=0;a--)l[e][a]==t&&l[e].splice(a,1);else delete l[e]},subscribe:function(e,t){if(!(e=(e||"").toString()))throw new TypeError("Channel not defined");h[e]||(h[e]=[]),h[e].push(t)},publish:function(e,t){if(!(e=(e||"").toString()))throw new TypeError("Channel not defined");!function(e,t){n.__jstorage_meta||(n.__jstorage_meta={}),n.__jstorage_meta.PubSub||(n.__jstorage_meta.PubSub=[]),n.__jstorage_meta.PubSub.unshift([+new Date,e,t]),w(),v()}(e,t)},reInit:function(){d()},noConflict:function(e){return delete window.$.jStorage,e&&(window.jStorage=this),this}},function(){var e=!1;if("localStorage"in window)try{window.localStorage.setItem("_tmptest","tmpval"),e=!0,window.localStorage.removeItem("_tmptest")}catch(e){}if(e)try{window.localStorage&&(r=window.localStorage,s="localStorage",c=r.jStorage_update)}catch(e){}else if("globalStorage"in window)try{window.globalStorage&&(r="localhost"==window.location.hostname?window.globalStorage["localhost.localdomain"]:window.globalStorage[window.location.hostname],s="globalStorage",c=r.jStorage_update)}catch(e){}else{if(!(i=document.createElement("link")).addBehavior)return void(i=null);i.style.behavior="url(#default#userData)",document.getElementsByTagName("head")[0].appendChild(i);try{i.load("jStorage")}catch(e){i.setAttribute("jStorage","{}"),i.save("jStorage"),i.load("jStorage")}var t="{}";try{t=i.getAttribute("jStorage")}catch(e){}try{c=i.getAttribute("jStorage_update")}catch(e){}r.jStorage=t,s="userDataBehavior"}_(),b(),"localStorage"==s||"globalStorage"==s?"addEventListener"in window?window.addEventListener("storage",m,!1):document.attachEvent("onstorage",m):"userDataBehavior"==s&&setInterval(m,1e3),T(),"addEventListener"in window&&window.addEventListener("pageshow",function(e){e.persisted&&m()},!1)}()}();